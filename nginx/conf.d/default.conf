server {
    listen 80;
    server_name aminxdev.ir www.aminxdev.ir;

    # ğŸ”‘ Ù…Ø³ÛŒØ± Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Certbot Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ø¯Ø§Ù…Ù†Ù‡ (Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§Ø´Ø¯)
    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    # â¬‡ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† (Ù…ÙˆÙ‚Øª Ø¨Ø±Ø§ÛŒ Ù¾ÙˆØ±Øª 80) â¬‡ï¸
    root /var/www/html;
    index index.html index.php;
    charset utf-8;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass php:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_intercept_errors off;
        # Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ PHP-FPM Ø§Ø² Ú©Ø§Ù†ÙÛŒÚ¯ Ø§ÙˆÙ„ÛŒÙ‡
        fastcgi_read_timeout 300;
        fastcgi_buffer_size 16k;
        fastcgi_buffers 4 16k;
    }

    # Ø­ÙØ§Ø¸Øª Ø§Ø² ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ .ht (Ø¯Ø± Nginx Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ù„Ø§Ø²Ù… Ù†ÛŒØ³Øª ÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø­ØªÛŒØ§Ø· Ù†Ú¯Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª)
    location ~ /.ht {  
        deny all;  
    }
}